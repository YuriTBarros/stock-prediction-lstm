graph TB
    subgraph "ğŸŒ Acesso do UsuÃ¡rio"
        USER[ğŸ‘¤ UsuÃ¡rio]
    end

    subgraph "ğŸ”§ Camada de AplicaÃ§Ã£o"
        API[ğŸš€ API FastAPI<br/>Treinar e Prever]
        N8N[ğŸ¤– n8n<br/>AutomaÃ§Ã£o]
        MLFLOW[ğŸ“Š MLflow<br/>Experimentos]
    end

    subgraph "ğŸ§  Camada de Machine Learning"
        TRAIN[ğŸ“š Treinamento<br/>LSTM Model]
        PREDICT[ğŸ”® PrediÃ§Ã£o<br/>PreÃ§os Futuros]
        ARTIFACTS[(ğŸ’¾ Artefatos<br/>Modelos Salvos)]
    end

    subgraph "ğŸ’¾ Camada de Dados"
        POSTGRES[(ğŸ—„ï¸ PostgreSQL<br/>Metadados)]
        YAHOO[ğŸ“ˆ Yahoo Finance<br/>Dados de AÃ§Ãµes]
    end

    subgraph "ğŸ“¢ NotificaÃ§Ãµes"
        DISCORD[ğŸ’¬ Discord<br/>Alertas]
        PROXY[ğŸ”„ Webhook Proxy]
    end

    %% ConexÃµes principais
    USER -->|HTTP Requests| API
    USER -->|Visualizar| MLFLOW
    USER -->|Configurar| N8N

    API -->|Registrar| MLFLOW
    API -->|Executar| TRAIN
    API -->|Executar| PREDICT

    N8N -->|Agendar| API
    N8N -->|Enviar| PROXY
    PROXY -->|Notificar| DISCORD

    TRAIN -->|Baixar| YAHOO
    TRAIN -->|Salvar| ARTIFACTS
    TRAIN -->|Log| MLFLOW

    PREDICT -->|Carregar| ARTIFACTS

    MLFLOW -->|Armazenar| POSTGRES
    N8N -->|Armazenar| POSTGRES

    %% Estilos
    classDef userClass fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    classDef apiClass fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef mlClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef dataClass fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    classDef notifyClass fill:#fce4ec,stroke:#c2185b,stroke-width:2px

    class USER userClass
    class API,N8N,MLFLOW apiClass
    class TRAIN,PREDICT,ARTIFACTS mlClass
    class POSTGRES,YAHOO dataClass
    class DISCORD,PROXY notifyClass
